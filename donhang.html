<html lang="vi">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Nunito', sans-serif;
        }
    </style>
</head>
<body class="bg-[#F4F4F4]">
    <div class="flex">
        <!-- Sidebar trái -->
        <div id="sidebar" class="bg-[#A7C7E7] w-64 fixed left-0 top-0 h-screen p-6 flex flex-col justify-between transition-all duration-300">
            <div>
                <button onclick="toggleSidebar()" class="absolute top-4 right-[-12px] bg-white p-2 rounded-full shadow-md">
                    <span id="toggle-icon">←</span>
                </button>
                <div class="flex items-center mb-8">
                    <img alt="Profile picture" class="rounded-full w-20 h-20 border border-gray-400 shadow-md" 
                        src="https://storage.googleapis.com/a1aa/image/drKMlY2Uygxoziic1ASFbEqjmMOmuS-omlByaH403yk.jpg"/>
                    <div id="profile-info" class="ml-3">
                        <p class="font-bold text-lg">Robert Grant</p>
                        <p class="text-sm text-gray-600">Marketing Director</p>
                    </div>
                </div>
                <nav>
                    <ul class="space-y-4">
                        <li>
                            <a class="flex items-center text-gray-700 hover:text-[#F4F4F4]" href="#">
                                <i class="fas fa-user mr-3"></i> <span class="sidebar-text">Quản lý người dùng</span>
                            </a>
                        </li>
                        <li>
                            <a class="flex items-center text-gray-700 hover:text-[#A7C7E7]" href="#">
                                <i class="fas fa-box mr-3"></i> <span class="sidebar-text">Quản lý sản phẩm</span>
                            </a>
                        </li>
                        <li>
                            <a class="flex items-center text-gray-700 hover:text-[#A7C7E7]" href="#">
                                <i class="fas fa-paint-brush mr-3"></i> <span class="sidebar-text">Quản lý giao diện</span>
                            </a>
                        </li>
                        <li>
                            <a class="flex items-center text-gray-700 hover:text-[#A7C7E7]" href="#">
                                <i class="fas fa-edit mr-3"></i> <span class="sidebar-text">Quản lý bài viết</span>
                            </a>
                        </li>
                        <li>
                            <a class="flex items-center text-gray-700 hover:text-[#A7C7E7]" href="#">
                                <i class="fas fa-shopping-cart mr-3"></i> <span class="sidebar-text">Quản lý đơn hàng</span>
                            </a>
                        </li>
                        <li>
                            <a class="flex items-center text-gray-700 hover:text-[#A7C7E7]" href="#">
                                <i class="fas fa-user-cog mr-3"></i> <span class="sidebar-text">Quản lý thao tác người dùng</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="mt-8">
                <a class="flex items-center text-red-600 hover:text-red-800" href="#">
                    <i class="fas fa-sign-out-alt mr-3"></i> <span class="sidebar-text">Log out</span>
                </a>
            </div>
        </div>    
        
        <!-- Main Content -->
        <div class="flex-1 p-8 h-screen overflow-y-auto ml-[25%]">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold">Dashboard</h1>
                <div class="flex items-center">
                    <i class="fas fa-bell text-gray-600 mr-6"></i>
                    <i class="fas fa-cog text-gray-600"></i>
                </div>
            </div>
            <table id="user-table" class="w-full mt-4 border-collapse border border-gray-300">
                <thead>
                    <tr class="bg-gray-200">
                        <th class="border p-2">Tên</th>
                        <th class="border p-2">Email</th>
                        <th class="border p-2">Ngày sinh</th>
                        <th class="border p-2">Vai trò</th>
                        <th class="border p-2">Trạng thái</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dữ liệu sẽ được thêm vào đây -->
                </tbody>
            </table>
                <div id="user-management-actions" class="hidden flex space-x-4">
                    <button class="bg-blue-500 text-white px-4 py-2 rounded" onclick="toggleForm('add-form')">Thêm</button>
                    <button class="bg-yellow-500 text-white px-4 py-2 rounded" onclick="toggleForm('edit-form')">Sửa</button>
                    <button class="bg-red-500 text-white px-4 py-2 rounded" onclick="toggleForm('delete-form')">Xóa</button>
                    <button class="bg-gray-500 text-white px-4 py-2 rounded" onclick="toggleForm('lock-form')">Khóa</button>
                    <button class="bg-green-500 text-white px-4 py-2 rounded" onclick="toggleForm('unlock-form')">Mở khóa</button>
                </div>
                
                <!-- Các khung nhập -->
                <div id="form-container" class="mt-4 hidden">
                    <form id="add-form" class="hidden p-6 bg-gray-100 rounded-lg shadow-md space-y-4">
                        <h2 class="text-xl font-semibold text-gray-700">Nhập thông tin người dùng</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input type="text" class="border p-3 rounded w-full" placeholder="Tên người dùng">
                            <input type="date" placeholder="Ngày sinh" class="border p-3 rounded w-full">
                        </div>
                        <input type="email" placeholder="Email" class="border p-3 rounded w-full">
                        <input type="text" placeholder="Địa chỉ" class="border p-3 rounded w-full">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <input type="password" placeholder="Mật khẩu" class="border p-3 rounded w-full">
                            <input type="password" placeholder="Xác nhận mật khẩu" class="border p-3 rounded w-full">
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="text-gray-600">Giới tính:</label>
                                <select name="role" class="border p-3 rounded w-full mt-1">
                                    <option>Nam</option>
                                    <option>Nữ</option>
                                    <option>Khác</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-gray-600">Vai trò:</label>
                                <select class="border p-3 rounded w-full mt-1">
                                    <option>Admin</option>
                                    <option>Nhân viên</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label class="text-gray-600">Trạng thái tài khoản:</label>
                            <select name="status" class="border p-3 rounded w-full mt-1">
                                <option>Hoạt động</option>
                                <option>Bị khóa</option>
                                <option>Tạm ngưng</option>
                            </select>
                        </div>
                        <textarea placeholder="Lý do khóa tài khoản (nếu có)" class="border p-3 rounded w-full mt-2"></textarea>
                        <button type="button" onclick="saveUser()" class="w-full bg-blue-500 text-white font-semibold p-3 rounded-lg hover:bg-blue-600 transition">
                            Lưu
                        </button>
                        <!-- Thông báo hiển thị khi lưu thành công -->
                        <div id="save-notification" class="hidden fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg">
                            Lưu thông tin thành công!
                        </div>
                    </form>
                    <form id="edit-form" class="hidden p-6 bg-gray-100 rounded-lg shadow-md space-y-4">
                        <h2 class="text-xl font-semibold text-gray-700">Chỉnh sửa thông tin người dùng</h2>
                        <div>
                            <label class="text-gray-600">Nhập ID cần sửa:</label>
                            <input type="text" class="border p-3 rounded w-full mt-1" placeholder="ID người dùng">
                        </div>
                        <div>
                            <label class="text-gray-600">Tên mới:</label>
                            <input type="text" class="border p-3 rounded w-full mt-1" placeholder="Tên người dùng mới">
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="text-gray-600">Email mới:</label>
                                <input type="email" class="border p-3 rounded w-full mt-1" placeholder="Email mới">
                            </div>
                            <div>
                                <label class="text-gray-600">Số điện thoại:</label>
                                <input type="text" class="border p-3 rounded w-full mt-1" placeholder="Số điện thoại mới">
                            </div>
                        </div>
                        <div>
                            <label class="text-gray-600">Mật khẩu mới:</label>
                            <input type="password" class="border p-3 rounded w-full mt-1" placeholder="Mật khẩu mới">
                        </div>
                        <div>
                            <label class="text-gray-600">Vai trò:</label>
                            <select class="border p-3 rounded w-full mt-1">
                                <option>Admin</option>
                                <option>Nhân viên</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full bg-yellow-500 text-white font-semibold p-3 rounded-lg hover:bg-yellow-600 transition">Lưu</button>
                    </form>

                    <form id="delete-form" class="hidden p-6 bg-gray-100 rounded-lg shadow-md space-y-4">
                        <h2 class="text-xl font-semibold text-red-600">Xóa tài khoản người dùng</h2>
                        <div>
                            <label class="text-gray-600">Nhập ID cần xóa:</label>
                            <input type="text" class="border p-3 rounded w-full mt-1" placeholder="ID người dùng">
                        </div>
                        <div>
                            <label class="text-gray-600">Nhập Email hoặc Tên người dùng để xác nhận:</label>
                            <input type="text" class="border p-3 rounded w-full mt-1" placeholder="Email hoặc Tên người dùng">
                        </div>
                        <button type="submit" class="w-full bg-red-500 text-white font-semibold p-3 rounded-lg hover:bg-red-600 transition">
                            Xác nhận xóa
                        </button>
                    </form>

                    <form id="lock-form" class="hidden p-6 bg-gray-100 rounded-lg shadow-md space-y-4">
                        <h2 class="text-xl font-semibold text-gray-700">Khóa tài khoản người dùng</h2>
                        <div>
                            <label class="text-gray-600">Nhập ID cần khóa:</label>
                            <input type="text" class="border p-3 rounded w-full mt-1" placeholder="ID người dùng">
                        </div>
                        <div>
                            <label class="text-gray-600">Ngày bắt đầu khóa:</label>
                            <input type="date" class="border p-3 rounded w-full mt-1">
                        </div>
                        <div>
                            <label class="text-gray-600">Lý do khóa tài khoản:</label>
                            <textarea class="border p-3 rounded w-full mt-1" placeholder="Nhập lý do khóa"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-gray-500 text-white font-semibold p-3 rounded-lg hover:bg-gray-600 transition">
                            Xác nhận khóa
                        </button>
                    </form>

                    <form id="unlock-form" class="hidden p-6 bg-gray-100 rounded-lg shadow-md space-y-4">
                        <h2 class="text-xl font-semibold text-green-600">Mở khóa tài khoản</h2>
                        <div>
                            <label class="text-gray-600">Nhập ID cần mở khóa:</label>
                            <input type="text" class="border p-3 rounded w-full mt-1" placeholder="ID người dùng">
                        </div>
                        <div>
                            <label class="text-gray-600">Lý do mở khóa:</label>
                            <textarea class="border p-3 rounded w-full mt-1" placeholder="Nhập lý do mở khóa"></textarea>
                        </div>
                        <div>
                            <label class="text-gray-600">Ghi chú (nếu có):</label>
                            <textarea class="border p-3 rounded w-full mt-1" placeholder="Nhập ghi chú"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-green-500 text-white font-semibold p-3 rounded-lg hover:bg-green-600 transition">
                            Xác nhận mở khóa
                        </button>
                    </form>
                </div>
            </div>
        </div>
    <script>
        async function fetchData() {
    try {
        const response = await fetch('https://api.example.com/dashboard');
        const data = await response.json();
        
        document.getElementById('views').textContent = data.views;
        document.getElementById('followers').textContent = data.followers;
        document.getElementById('reposts').textContent = data.reposts;
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}

fetchData();

function showUserManagement() {
    document.getElementById('user-management-actions').classList.remove('hidden');
    document.getElementById("user-table").classList.remove("hidden");
}

function toggleForm(formId) {
    // Ẩn tất cả các form trong khung
    document.querySelectorAll("#form-container form").forEach(form => {
        form.classList.add("hidden");
    });

    // Hiển thị form được chọn
    document.getElementById(formId).classList.remove("hidden");

    // Hiển thị phần container nếu chưa hiển thị
    document.getElementById("form-container").classList.remove("hidden");
}

function showSaveNotification() {
    const notification = document.getElementById("save-notification");
    notification.classList.remove("hidden");

    // Ẩn thông báo sau 3 giây
    setTimeout(() => {
        notification.classList.add("hidden");
    }, 3000);
}

function saveUser() {
    // Lấy giá trị từ form
    const name = document.querySelector('#add-form input[placeholder="Tên người dùng"]').value.trim();
    const email = document.querySelector('#add-form input[placeholder="Email"]').value.trim();
    const dob = document.querySelector('#add-form input[placeholder="Ngày sinh"]').value;
    const role = document.querySelector('#add-form select[name="role"]').value;
    const status = document.querySelector('#add-form select[name="status"]').value;

    // Kiểm tra dữ liệu hợp lệ
    if (!name || !email || !dob) {
        alert("Vui lòng nhập đầy đủ thông tin!");
        return;
    }

    // Kiểm tra bảng tồn tại
    const table = document.getElementById("user-table");
    if (!table) {
        console.error("Bảng user-table không tồn tại!");
        return;
    }

    const tbody = table.querySelector("tbody");
    if (!tbody) {
        console.error("Bảng không có phần <tbody>!");
        return;
    }

    // Thêm dữ liệu vào bảng
    const row = document.createElement("tr");
    row.innerHTML = `
        <td class="border p-2">${name}</td>
        <td class="border p-2">${email}</td>
        <td class="border p-2">${dob}</td>
        <td class="border p-2">${role}</td>
        <td class="border p-2">${status}</td>
    `;

    tbody.appendChild(row);

    // Hiển thị thông báo
    showSaveNotification();

    // Xóa dữ liệu form sau khi lưu
    setTimeout(() => {
    const form = document.getElementById("add-form");
    if (form) {
        form.reset();
    }
}, 100);
}

function toggleSidebar() {
    let sidebar = document.getElementById("sidebar");
    let content = document.getElementById("main-content");
    let icon = document.getElementById("toggle-icon");
    let profileInfo = document.getElementById("profile-info");
    let sidebarTexts = document.querySelectorAll(".sidebar-text");

    if (sidebar.classList.contains("w-64")) {
        // Thu nhỏ sidebar
        sidebar.classList.replace("w-64", "w-16");
        content.classList.replace("ml-64", "ml-16");
        icon.innerText = "→";
        profileInfo.style.opacity = "0";  // Ẩn thông tin user
        profileInfo.style.overflow = "hidden";
        sidebarTexts.forEach(text => {
            text.style.opacity = "0";
            text.style.width = "0";
            text.style.overflow = "hidden";
            text.style.transition = "opacity 0.3s ease, width 0.3s ease";
        });
    } else {
        // Mở rộng sidebar
        sidebar.classList.replace("w-16", "w-64");
        content.classList.replace("ml-16", "ml-64");
        icon.innerText = "←";
        profileInfo.style.opacity = "1";  
        sidebarTexts.forEach(text => {
            text.style.opacity = "1";
            text.style.width = "auto";
        });
    }
}

    </script>
</body>
</html>